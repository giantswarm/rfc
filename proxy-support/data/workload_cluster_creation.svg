<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="635px" preserveAspectRatio="none" style="width:1661px;height:635px;background:#FFFFFF;" version="1.1" viewBox="0 0 1661 635" width="1661px" zoomAndPan="magnify"><defs/><g><rect fill="#FFA500" height="623.4531" style="stroke:#181818;stroke-width:0.5;" width="1182" x="73" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153" x="587.5" y="18.0669">management cluster</text><rect fill="#008000" height="623.4531" style="stroke:#181818;stroke-width:0.5;" width="318.5" x="1335" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123" x="1432.75" y="18.0669">workload cluster</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="120" x2="120" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="206" x2="206" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="267" x2="267" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="522.5" x2="522.5" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="861" x2="861" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1161" x2="1161" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1376" x2="1376" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1479.5" x2="1479.5" y1="81.2969" y2="550.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1595.5" x2="1595.5" y1="81.2969" y2="550.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="77.9951">User/Git</text><ellipse cx="36" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36,21.5 L36,48.5 M23,29.5 L49,29.5 M36,48.5 L23,63.5 M36,48.5 L49,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="562.1514">User/Git</text><ellipse cx="36" cy="573.9531" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36,581.9531 L36,608.9531 M23,589.9531 L49,589.9531 M36,608.9531 L23,623.9531 M36,608.9531 L49,623.9531 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="77" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="84" y="69.9951">Cluster CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="77" y="549.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="84" y="569.1514">Cluster CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="174" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="181" y="69.9951">App CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="174" y="549.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="181" y="569.1514">App CR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="249" y="77.9951">CAPI</text><ellipse cx="267.5" cy="49" fill="#0000FF" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="263.5,37,269.5,32,267.5,37,269.5,42,263.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="249" y="562.1514">CAPI</text><ellipse cx="267.5" cy="581.4531" fill="#0000FF" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="263.5,569.4531,269.5,564.4531,267.5,569.4531,269.5,574.4531,263.5,569.4531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="444.5" y="77.9951">cluster-apps-operator</text><ellipse cx="522.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="518.5,37,524.5,32,522.5,37,524.5,42,518.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="444.5" y="562.1514">cluster-apps-operator</text><ellipse cx="522.5" cy="581.4531" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="518.5,569.4531,524.5,564.4531,522.5,569.4531,524.5,574.4531,518.5,569.4531" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="807" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="814" y="69.9951">cluster values</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="807" y="549.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="814" y="569.1514">cluster values</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="1072" y="77.9951">WC specific App operator</text><ellipse cx="1161.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1157.5,37,1163.5,32,1161.5,37,1163.5,42,1157.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="1072" y="562.1514">WC specific App operator</text><ellipse cx="1161.5" cy="581.4531" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1157.5,569.4531,1163.5,564.4531,1161.5,569.4531,1163.5,574.4531,1157.5,569.4531" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1339" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1346" y="69.9951">Chart CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1339" y="549.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1346" y="569.1514">Chart CR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1426.5" y="77.9951">Chart operator</text><ellipse cx="1479.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1475.5,37,1481.5,32,1479.5,37,1481.5,42,1475.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1426.5" y="562.1514">Chart operator</text><ellipse cx="1479.5" cy="581.4531" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1475.5,569.4531,1481.5,564.4531,1479.5,569.4531,1481.5,574.4531,1475.5,569.4531" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1542.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1549.5" y="69.9951">cert-manager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1542.5" y="549.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1549.5" y="569.1514">cert-manager</text><polygon fill="#181818" points="108.5,108.4297,118.5,112.4297,108.5,116.4297,112.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="36" x2="114.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="43" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="56" y="107.3638">create</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1654.5" x="0" y="140.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1654.5" y1="140.9961" y2="140.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1654.5" y1="143.9961" y2="143.9961"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="53" x="800.75" y="130.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="806.75" y="146.4966">CAPI</text><polygon fill="#181818" points="131.5,180.6953,121.5,184.6953,131.5,188.6953,127.5,184.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="266.5" y1="184.6953" y2="184.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="137.5" y="179.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="150.5" y="179.6294">reconcile</text><polygon fill="#181818" points="131.5,209.8281,121.5,213.8281,131.5,217.8281,127.5,213.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="521.5" y1="213.8281" y2="213.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="137.5" y="208.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="150.5" y="208.7622">reconcile</text><polygon fill="#181818" points="849.5,238.9609,859.5,242.9609,849.5,246.9609,853.5,242.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="855.5" y1="242.9609" y2="242.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="237.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="542.5" y="237.895">creates a cluster-specific secret and configmap</text><polygon fill="#181818" points="849.5,268.0938,859.5,272.0938,849.5,276.0938,853.5,272.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="267.5" x2="855.5" y1="272.0938" y2="272.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="274.5" y="267.0278">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="287.5" y="267.0278">fetches the cluster-specific secret</text><line style="stroke:#181818;stroke-width:1.0;" x1="267.5" x2="309.5" y1="301.2266" y2="301.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="309.5" x2="309.5" y1="301.2266" y2="314.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="268.5" x2="309.5" y1="314.2266" y2="314.2266"/><polygon fill="#181818" points="278.5,310.2266,268.5,314.2266,278.5,318.2266,274.5,314.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="274.5" y="296.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="287.5" y="296.1606">continue with machine bootstraping</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1654.5" x="0" y="342.793"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1654.5" y1="342.793" y2="342.793"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1654.5" y1="345.793" y2="345.793"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="117" x="768.75" y="332.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98" x="774.75" y="348.2935">app platform</text><polygon fill="#181818" points="1149.5,382.4922,1159.5,386.4922,1149.5,390.4922,1153.5,386.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="1155.5" y1="386.4922" y2="386.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="381.4263">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="542.5" y="381.4263">deploys in WC org</text><polygon fill="#181818" points="1467.5,411.625,1477.5,415.625,1467.5,419.625,1471.5,415.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="1473.5" y1="415.625" y2="415.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="410.5591">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="542.5" y="410.5591">deploys in namespace/giantswarm</text><polygon fill="#181818" points="872.5,440.7578,862.5,444.7578,872.5,448.7578,868.5,444.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="866.5" x2="1160.5" y1="444.7578" y2="444.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="878.5" y="439.6919">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="891.5" y="439.6919">get cluster-specific secret and configmap</text><polygon fill="#181818" points="1364.5,469.8906,1374.5,473.8906,1364.5,477.8906,1368.5,473.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1161.5" x2="1370.5" y1="473.8906" y2="473.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1168.5" y="468.8247">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1190.5" y="468.8247">create with merged values</text><polygon fill="#181818" points="1387.5,499.0234,1377.5,503.0234,1387.5,507.0234,1383.5,503.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1381.5" x2="1478.5" y1="503.0234" y2="503.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1393.5" y="497.9575">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1415.5" y="497.9575">reconcile</text><polygon fill="#181818" points="1584,528.1563,1594,532.1563,1584,536.1563,1588,532.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1479.5" x2="1590" y1="532.1563" y2="532.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1486.5" y="527.0903">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1508.5" y="527.0903">create</text><!--MD5=[96364f8d263ee5941dfe96b4e5d61be7]
@startuml
autonumber

actor "User/Git" as User 

box "management cluster" #orange
participant "Cluster CR" as clusterCR #OrangeRed
participant "App CR" as appCR #OrangeRed
control "CAPI" as CAPI #blue
control "cluster-apps-operator" as clusterAppsOperator
participant "cluster values" as clusterValues
control "WC specific App operator" as appOperator
/'control "Chart operator" as chartOperator #orange'/
end box

box "workload cluster" #green
participant "Chart CR" as chartCR #OrangeRed
control "Chart operator" as chartOperatorWC
participant "cert-manager" as certManager
end box


User -> clusterCR: create

== CAPI ==

CAPI -> clusterCR: reconcile
clusterAppsOperator -> clusterCR: reconcile
clusterAppsOperator -> clusterValues: creates a cluster-specific secret and configmap
CAPI -> clusterValues: fetches the cluster-specific secret
CAPI -> CAPI: continue with machine bootstraping

== app platform ==

clusterAppsOperator -> appOperator: deploys in WC org
clusterAppsOperator -> chartOperatorWC: deploys in namespace/giantswarm

appOperator -> clusterValues: get cluster-specific secret and configmap
appOperator -> chartCR: create with merged values

chartOperatorWC -> chartCR: reconcile
chartOperatorWC -> certManager: create

@enduml

@startuml
autonumber

actor "User/Git" as User 

box "management cluster" #orange
participant "Cluster CR" as clusterCR #OrangeRed
participant "App CR" as appCR #OrangeRed
control "CAPI" as CAPI #blue
control "cluster-apps-operator" as clusterAppsOperator
participant "cluster values" as clusterValues
control "WC specific App operator" as appOperator
end box

box "workload cluster" #green
participant "Chart CR" as chartCR #OrangeRed
control "Chart operator" as chartOperatorWC
participant "cert-manager" as certManager
end box


User -> clusterCR: create

== CAPI ==

CAPI -> clusterCR: reconcile
clusterAppsOperator -> clusterCR: reconcile
clusterAppsOperator -> clusterValues: creates a cluster-specific secret and configmap
CAPI -> clusterValues: fetches the cluster-specific secret
CAPI -> CAPI: continue with machine bootstraping

== app platform ==

clusterAppsOperator -> appOperator: deploys in WC org
clusterAppsOperator -> chartOperatorWC: deploys in namespace/giantswarm

appOperator -> clusterValues: get cluster-specific secret and configmap
appOperator -> chartCR: create with merged values

chartOperatorWC -> chartCR: reconcile
chartOperatorWC -> certManager: create

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>