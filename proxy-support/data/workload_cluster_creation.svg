<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="664px" preserveAspectRatio="none" style="width:1571px;height:664px;background:#FFFFFF;" version="1.1" viewBox="0 0 1571 664" width="1571px" zoomAndPan="magnify"><defs/><g><rect fill="#FFA500" height="652.5859" style="stroke:#181818;stroke-width:0.5;" width="1092" x="73" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153" x="542.5" y="18.0669">management cluster</text><rect fill="#008000" height="652.5859" style="stroke:#181818;stroke-width:0.5;" width="318.5" x="1245" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123" x="1342.75" y="18.0669">workload cluster</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="120" x2="120" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="206" x2="206" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="267" x2="267" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="522.5" x2="522.5" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="762" x2="762" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="884" x2="884" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1071" x2="1071" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1286" x2="1286" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1389.5" x2="1389.5" y1="81.2969" y2="579.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1505.5" x2="1505.5" y1="81.2969" y2="579.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="77.9951">User/Git</text><ellipse cx="36" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36,21.5 L36,48.5 M23,29.5 L49,29.5 M36,48.5 L23,63.5 M36,48.5 L49,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="591.2842">User/Git</text><ellipse cx="36" cy="603.0859" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36,611.0859 L36,638.0859 M23,619.0859 L49,619.0859 M36,638.0859 L23,653.0859 M36,638.0859 L49,653.0859 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="77" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="84" y="69.9951">Cluster CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="77" y="578.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="84" y="598.2842">Cluster CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="174" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="181" y="69.9951">App CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="174" y="578.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="181" y="598.2842">App CR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="249" y="77.9951">CAPI</text><ellipse cx="267.5" cy="49" fill="#0000FF" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="263.5,37,269.5,32,267.5,37,269.5,42,263.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="249" y="591.2842">CAPI</text><ellipse cx="267.5" cy="610.5859" fill="#0000FF" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="263.5,598.5859,269.5,593.5859,267.5,598.5859,269.5,603.5859,263.5,598.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="444.5" y="77.9951">cluster-apps-operator</text><ellipse cx="522.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="518.5,37,524.5,32,522.5,37,524.5,42,518.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="444.5" y="591.2842">cluster-apps-operator</text><ellipse cx="522.5" cy="610.5859" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="518.5,598.5859,524.5,593.5859,522.5,598.5859,524.5,603.5859,518.5,598.5859" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="708" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="715" y="69.9951">cluster values</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="708" y="578.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="715" y="598.2842">cluster values</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="827" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="834" y="69.9951">systemd proxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="827" y="578.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="834" y="598.2842">systemd proxy</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="982" y="77.9951">WC specific App operator</text><ellipse cx="1071.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1067.5,37,1073.5,32,1071.5,37,1073.5,42,1067.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="982" y="591.2842">WC specific App operator</text><ellipse cx="1071.5" cy="610.5859" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1067.5,598.5859,1073.5,593.5859,1071.5,598.5859,1073.5,603.5859,1067.5,598.5859" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1249" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1256" y="69.9951">Chart CR</text><rect fill="#FF4500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1249" y="578.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1256" y="598.2842">Chart CR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1336.5" y="77.9951">Chart operator</text><ellipse cx="1389.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1385.5,37,1391.5,32,1389.5,37,1391.5,42,1385.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1336.5" y="591.2842">Chart operator</text><ellipse cx="1389.5" cy="610.5859" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1385.5,598.5859,1391.5,593.5859,1389.5,598.5859,1391.5,603.5859,1385.5,598.5859" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1452.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1459.5" y="69.9951">cert-manager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1452.5" y="578.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1459.5" y="598.2842">cert-manager</text><polygon fill="#181818" points="108.5,108.4297,118.5,112.4297,108.5,116.4297,112.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="36" x2="114.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="43" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="56" y="107.3638">create</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1564.5" x="0" y="140.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1564.5" y1="140.9961" y2="140.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1564.5" y1="143.9961" y2="143.9961"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="53" x="755.75" y="130.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="761.75" y="146.4966">CAPI</text><polygon fill="#181818" points="131.5,180.6953,121.5,184.6953,131.5,188.6953,127.5,184.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="266.5" y1="184.6953" y2="184.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="137.5" y="179.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="150.5" y="179.6294">reconcile</text><polygon fill="#181818" points="131.5,209.8281,121.5,213.8281,131.5,217.8281,127.5,213.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="521.5" y1="213.8281" y2="213.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="137.5" y="208.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="150.5" y="208.7622">reconcile</text><polygon fill="#008000" points="750.5,238.9609,760.5,242.9609,750.5,246.9609,754.5,242.9609" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="522.5" x2="756.5" y1="242.9609" y2="242.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="237.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="542.5" y="237.895">creates a cluster-specific secret</text><polygon fill="#008000" points="872,268.0938,882,272.0938,872,276.0938,876,272.0938" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="522.5" x2="878" y1="272.0938" y2="272.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="267.0278">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="542.5" y="267.0278">creates a cluster-specific systemd proxy drop-in</text><polygon fill="#008000" points="872,297.2266,882,301.2266,872,305.2266,876,301.2266" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="267.5" x2="878" y1="301.2266" y2="301.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="274.5" y="296.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="287.5" y="296.1606">fetches the cluster-specific secret</text><line style="stroke:#181818;stroke-width:1.0;" x1="267.5" x2="309.5" y1="330.3594" y2="330.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="309.5" x2="309.5" y1="330.3594" y2="343.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="268.5" x2="309.5" y1="343.3594" y2="343.3594"/><polygon fill="#181818" points="278.5,339.3594,268.5,343.3594,278.5,347.3594,274.5,343.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="274.5" y="325.2935">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="287.5" y="325.2935">continue with machine bootstraping</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1564.5" x="0" y="371.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1564.5" y1="371.9258" y2="371.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1564.5" y1="374.9258" y2="374.9258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="117" x="723.75" y="361.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98" x="729.75" y="377.4263">app platform</text><polygon fill="#181818" points="1059.5,411.625,1069.5,415.625,1059.5,419.625,1063.5,415.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="1065.5" y1="415.625" y2="415.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="410.5591">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="542.5" y="410.5591">deploys in WC org</text><polygon fill="#181818" points="1377.5,440.7578,1387.5,444.7578,1377.5,448.7578,1381.5,444.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="1383.5" y1="444.7578" y2="444.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="529.5" y="439.6919">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="542.5" y="439.6919">deploys in namespace/giantswarm</text><polygon fill="#181818" points="773.5,469.8906,763.5,473.8906,773.5,477.8906,769.5,473.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="767.5" x2="1070.5" y1="473.8906" y2="473.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="779.5" y="468.8247">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="801.5" y="468.8247">get cluster-specific secret and configmap</text><polygon fill="#181818" points="1274.5,499.0234,1284.5,503.0234,1274.5,507.0234,1278.5,503.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1071.5" x2="1280.5" y1="503.0234" y2="503.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1078.5" y="497.9575">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1100.5" y="497.9575">create with merged values</text><polygon fill="#181818" points="1297.5,528.1563,1287.5,532.1563,1297.5,536.1563,1293.5,532.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1291.5" x2="1388.5" y1="532.1563" y2="532.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1303.5" y="527.0903">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1325.5" y="527.0903">reconcile</text><polygon fill="#181818" points="1494,557.2891,1504,561.2891,1494,565.2891,1498,561.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389.5" x2="1500" y1="561.2891" y2="561.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1396.5" y="556.2231">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1418.5" y="556.2231">create</text><!--MD5=[4814ec58c11fb5c40e289daa7a9eb0e9]
@startuml
autonumber

actor "User/Git" as User 

box "management cluster" #orange
participant "Cluster CR" as clusterCR #OrangeRed
participant "App CR" as appCR #OrangeRed
control "CAPI" as CAPI #blue
control "cluster-apps-operator" as clusterAppsOperator
participant "cluster values" as clusterValues
participant "systemd proxy" as systemdProxy
control "WC specific App operator" as appOperator
/'control "Chart operator" as chartOperator #orange'/
end box

box "workload cluster" #green
participant "Chart CR" as chartCR #OrangeRed
control "Chart operator" as chartOperatorWC
participant "cert-manager" as certManager
end box

User -> clusterCR: create

== CAPI ==

CAPI -> clusterCR: reconcile
clusterAppsOperator -> clusterCR: reconcile
clusterAppsOperator - -[#green]> clusterValues: creates a cluster-specific secret
clusterAppsOperator -[#green]> systemdProxy: creates a cluster-specific systemd proxy drop-in
CAPI -[#green]> systemdProxy: fetches the cluster-specific secret
CAPI -> CAPI: continue with machine bootstraping

== app platform ==

clusterAppsOperator -> appOperator: deploys in WC org
clusterAppsOperator -> chartOperatorWC: deploys in namespace/giantswarm

appOperator -> clusterValues: get cluster-specific secret and configmap
appOperator -> chartCR: create with merged values

chartOperatorWC -> chartCR: reconcile
chartOperatorWC -> certManager: create

@enduml

@startuml
autonumber

actor "User/Git" as User 

box "management cluster" #orange
participant "Cluster CR" as clusterCR #OrangeRed
participant "App CR" as appCR #OrangeRed
control "CAPI" as CAPI #blue
control "cluster-apps-operator" as clusterAppsOperator
participant "cluster values" as clusterValues
participant "systemd proxy" as systemdProxy
control "WC specific App operator" as appOperator
end box

box "workload cluster" #green
participant "Chart CR" as chartCR #OrangeRed
control "Chart operator" as chartOperatorWC
participant "cert-manager" as certManager
end box

User -> clusterCR: create

== CAPI ==

CAPI -> clusterCR: reconcile
clusterAppsOperator -> clusterCR: reconcile
clusterAppsOperator - -[#green]> clusterValues: creates a cluster-specific secret
clusterAppsOperator -[#green]> systemdProxy: creates a cluster-specific systemd proxy drop-in
CAPI -[#green]> systemdProxy: fetches the cluster-specific secret
CAPI -> CAPI: continue with machine bootstraping

== app platform ==

clusterAppsOperator -> appOperator: deploys in WC org
clusterAppsOperator -> chartOperatorWC: deploys in namespace/giantswarm

appOperator -> clusterValues: get cluster-specific secret and configmap
appOperator -> chartCR: create with merged values

chartOperatorWC -> chartCR: reconcile
chartOperatorWC -> certManager: create

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>